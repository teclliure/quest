{% extends '::one_column.html.twig' %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/teclliurepatient/js/selectQuestionary.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/teclliureuser/js/jquery-ui-1.9.1.custom.min.js') }}" type="text/javascript"></script>
{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    <link type="text/css" rel="stylesheet" href="{{ asset('bundles/teclliureuser/css/south-street/jquery-ui-1.9.1.custom.min.css') }}">
{% endblock %}

{% block title %}{{ "Select questionary" | trans }}{% endblock %}

{% block inner_content %}
<div style="float: right">
    <div class="sonata-actions">
        <a class="btn sonata-action-element" href="{{ path('patient_show', { 'id': entity.id }) }}">
            {{ 'Back to show' | trans }}
        </a>
    </div>
</div>
<br />
<br />
<legend>
    {{ 'Person' | trans }} <span id="legendName">{{ entity.name }}</span>
</legend>

<ul id=""selectQuestionary">
    {% if catQuestionaries.questionaries is defined %}
        {% for questionary in catQuestionaries.questionaries %}
            <li>
                <a class="tooltiplink" data-content="{{ questionary.description }}" title="{{ questionary.name }}" href="{{ path('questionary_patient_create', {'id': entity.id, 'questionaryId': questionary.id}) }}">{{ questionary.name }}</a>
            </li>
        {% endfor %}
    {% endif %}
    {% for category in catQuestionaries.categories %}
        <li class="category">
            <a class="tooltiplink" data-content="{{ category.cat.description }}" title="{{ category.cat.name }}">{{ category.cat.name }}</a>

            <ul class="subcat">
            {% for subcat in category.subcats %}
                <li>
                    <a class="tooltiplink" data-content="{{ subcat.subcat.description }}" title="{{ subcat.subcat.name }}">{{ subcat.subcat.name }}</a>

                    <ul class="subcategoryQuestionaries">
                        {% for subQuestionary in subcat.questionaries %}
                            <li><a class="tooltiplink" data-content="{{ subQuestionary.description }}" title="{{ subQuestionary.name }}" href="{{ path('questionary_patient_create', {'id': entity.id, 'questionaryId': subQuestionary.id}) }}">{{ subQuestionary.name }}</a></li>
                        {% endfor %}
                    </ul>
                </li>
            {% endfor %}
            </ul>
        </li>
    {% endfor %}
</ul>
{% endblock %}